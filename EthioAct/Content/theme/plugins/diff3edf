(function(){function n(){this.Diff_Timeout=1;this.Diff_EditCost=4;this.Match_Threshold=.5;this.Match_Distance=1e3;this.Patch_DeleteThreshold=.5;this.Patch_Margin=4;this.Match_MaxBits=32}n.prototype.diff_main=function(n,t,i,r){var e,u,f;if("undefined"==typeof r&&(r=0>=this.Diff_Timeout?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout),null==n||null==t)throw Error("Null input. (diff_main)");return n==t?n?[[0,n]]:[]:("undefined"==typeof i&&(i=!0),e=i,u=this.diff_commonPrefix(n,t),i=n.substring(0,u),n=n.substring(u),t=t.substring(u),u=this.diff_commonSuffix(n,t),f=n.substring(n.length-u),n=n.substring(0,n.length-u),t=t.substring(0,t.length-u),n=this.diff_compute_(n,t,e,r),i&&n.unshift([0,i]),f&&n.push([0,f]),this.diff_cleanupMerge(n),n)};n.prototype.diff_compute_=function(n,t,i,r){if(!n)return[[1,t]];if(!t)return[[-1,n]];var u=n.length>t.length?n:t,f=n.length>t.length?t:n,e=u.indexOf(f);return-1!=e?(i=[[1,u.substring(0,e)],[0,f],[1,u.substring(e+f.length)]],n.length>t.length&&(i[0][0]=i[2][0]=-1),i):1==f.length?[[-1,n],[1,t]]:(u=this.diff_halfMatch_(n,t))?(f=u[0],n=u[1],e=u[2],t=u[3],u=u[4],f=this.diff_main(f,e,i,r),i=this.diff_main(n,t,i,r),f.concat([[0,u]],i)):i&&100<n.length&&100<t.length?this.diff_lineMode_(n,t,r):this.diff_bisect_(n,t,r)};n.prototype.diff_lineMode_=function(n,t,i){var r=this.diff_linesToChars_(n,t);n=r.chars1;t=r.chars2;r=r.lineArray;n=this.diff_main(n,t,!1,i);this.diff_charsToLines_(n,r);this.diff_cleanupSemantic(n);n.push([0,""]);for(var u=r=t=0,f="",e="";t<n.length;){switch(n[t][0]){case 1:u++;e+=n[t][1];break;case-1:r++;f+=n[t][1];break;case 0:if(1<=r&&1<=u){for(n.splice(t-r-u,r+u),t=t-r-u,r=this.diff_main(f,e,!1,i),u=r.length-1;0<=u;u--)n.splice(t,0,r[u]);t+=r.length}r=u=0;e=f=""}t++}return n.pop(),n};n.prototype.diff_bisect_=function(n,t,i){for(var f,r,u,l,e,s=n.length,a=t.length,w=Math.ceil((s+a)/2),v=w,p=2*w,h=Array(p),c=Array(p),y=0;y<p;y++)h[y]=-1,c[y]=-1;h[v+1]=0;c[v+1]=0;for(var y=s-a,b=0!=y%2,k=0,d=0,g=0,nt=0,o=0;o<w&&!((new Date).getTime()>i);o++){for(f=-o+k;f<=o-d;f+=2){for(r=v+f,u=f==-o||f!=o&&h[r-1]<h[r+1]?h[r+1]:h[r-1]+1,l=u-f;u<s&&l<a&&n.charAt(u)==t.charAt(l);)u++,l++;if(h[r]=u,u>s)d+=2;else if(l>a)k+=2;else if(b&&(r=v+y-f,0<=r&&r<p&&-1!=c[r])&&(e=s-c[r],u>=e))return this.diff_bisectSplit_(n,t,u,l,i)}for(f=-o+g;f<=o-nt;f+=2){for(r=v+f,e=f==-o||f!=o&&c[r-1]<c[r+1]?c[r+1]:c[r-1]+1,u=e-f;e<s&&u<a&&n.charAt(s-e-1)==t.charAt(a-u-1);)e++,u++;if(c[r]=e,e>s)nt+=2;else if(u>a)g+=2;else if(!b&&(r=v+y-f,0<=r&&r<p&&-1!=h[r]&&(u=h[r],l=v+u-r,e=s-e,u>=e)))return this.diff_bisectSplit_(n,t,u,l,i)}}return[[-1,n],[1,t]]};n.prototype.diff_bisectSplit_=function(n,t,i,r,u){var f=n.substring(0,i),e=t.substring(0,r);return n=n.substring(i),t=t.substring(r),f=this.diff_main(f,e,!1,u),u=this.diff_main(n,t,!1,u),f.concat(u)};n.prototype.diff_linesToChars_=function(n,t){function u(n){for(var u,f="",e=0,t=-1,o=r.length;t<n.length-1;)t=n.indexOf("\n",e),-1==t&&(t=n.length-1),u=n.substring(e,t+1),e=t+1,(i.hasOwnProperty?i.hasOwnProperty(u):void 0!==i[u])?f+=String.fromCharCode(i[u]):(f+=String.fromCharCode(o),i[u]=o,r[o++]=u);return f}var r=[],i={},f,e;return r[0]="",f=u(n),e=u(t),{chars1:f,chars2:e,lineArray:r}};n.prototype.diff_charsToLines_=function(n,t){for(var i=0;i<n.length;i++){for(var u=n[i][1],f=[],r=0;r<u.length;r++)f[r]=t[u.charCodeAt(r)];n[i][1]=f.join("")}};n.prototype.diff_commonPrefix=function(n,t){if(!n||!t||n.charAt(0)!=t.charAt(0))return 0;for(var r=0,u=Math.min(n.length,t.length),i=u,f=0;r<i;)n.substring(f,i)==t.substring(f,i)?f=r=i:u=i,i=Math.floor((u-r)/2+r);return i};n.prototype.diff_commonSuffix=function(n,t){if(!n||!t||n.charAt(n.length-1)!=t.charAt(t.length-1))return 0;for(var r=0,u=Math.min(n.length,t.length),i=u,f=0;r<i;)n.substring(n.length-i,n.length-f)==t.substring(t.length-i,t.length-f)?f=r=i:u=i,i=Math.floor((u-r)/2+r);return i};n.prototype.diff_commonOverlap_=function(n,t){var i=n.length,r=t.length,u,f;if(0==i||0==r)return 0;if(i>r?n=n.substring(i-r):i<r&&(t=t.substring(0,i)),i=Math.min(i,r),n==t)return i;for(r=0,u=1;;){if(f=n.substring(i-u),f=t.indexOf(f),-1==f)return r;u+=f;(0==f||n.substring(i-u)==t.substring(0,u))&&(r=u,u++)}};n.prototype.diff_halfMatch_=function(n,t){function o(n,t,i){for(var u,f,a=n.substring(i,i+Math.floor(n.length/4)),r=-1,e="",o,h,c,l;-1!=(r=t.indexOf(a,r+1));)u=s.diff_commonPrefix(n.substring(i),t.substring(r)),f=s.diff_commonSuffix(n.substring(0,i),t.substring(0,r)),e.length<f+u&&(e=t.substring(r-f,r)+t.substring(r,r+u),o=n.substring(0,i-f),h=n.substring(i+u),c=t.substring(0,r-f),l=t.substring(r+u));return 2*e.length>=n.length?[o,h,c,l,e]:null}var i,f,e;if(0>=this.Diff_Timeout||(i=n.length>t.length?n:t,f=n.length>t.length?t:n,4>i.length||2*f.length<i.length))return null;var s=this,u=o(i,f,Math.ceil(i.length/4)),i=o(i,f,Math.ceil(i.length/2)),r;return!u&&!i?null:(r=i?u?u[4].length>i[4].length?u:i:i:u,n.length>t.length?(u=r[0],i=r[1],f=r[2],e=r[3]):(f=r[0],e=r[1],u=r[2],i=r[3]),r=r[4],[u,i,f,e,r])};n.prototype.diff_cleanupSemantic=function(n){for(var f=!1,r=[],i=0,u=null,t=0,s=0,h=0,e=0,o=0;t<n.length;)0==n[t][0]?(r[i++]=t,s=e,h=o,o=e=0,u=n[t][1]):(1==n[t][0]?e+=n[t][1].length:o+=n[t][1].length,u&&u.length<=Math.max(s,h)&&u.length<=Math.max(e,o)&&(n.splice(r[i-1],0,[-1,u]),n[r[i-1]+1][0]=1,i--,i--,t=0<i?r[i-1]:-1,o=e=h=s=0,u=null,f=!0)),t++;for(f&&this.diff_cleanupMerge(n),this.diff_cleanupSemanticLossless(n),t=1;t<n.length;)-1==n[t-1][0]&&1==n[t][0]&&(f=n[t-1][1],r=n[t][1],i=this.diff_commonOverlap_(f,r),u=this.diff_commonOverlap_(r,f),i>=u?(i>=f.length/2||i>=r.length/2)&&(n.splice(t,0,[0,r.substring(0,i)]),n[t-1][1]=f.substring(0,f.length-i),n[t+1][1]=r.substring(i),t++):(u>=f.length/2||u>=r.length/2)&&(n.splice(t,0,[0,f.substring(0,u)]),n[t-1][0]=1,n[t-1][1]=r.substring(0,r.length-u),n[t+1][0]=-1,n[t+1][1]=f.substring(u),t++),t++),t++};n.prototype.diff_cleanupSemanticLossless=function(t){function o(t,i){if(!t||!i)return 6;var r=t.charAt(t.length-1),u=i.charAt(0),f=r.match(n.nonAlphaNumericRegex_),s=u.match(n.nonAlphaNumericRegex_),e=f&&r.match(n.whitespaceRegex_),o=s&&u.match(n.whitespaceRegex_),r=e&&r.match(n.linebreakRegex_),u=o&&u.match(n.linebreakRegex_),h=r&&t.match(n.blanklineEndRegex_),c=u&&i.match(n.blanklineStartRegex_);return h||c?5:r||u?4:f&&!e&&o?3:e||o?2:f||s?1:0}for(var i=1;i<t.length-1;){if(0==t[i-1][0]&&0==t[i+1][0]){var u=t[i-1][1],r=t[i][1],f=t[i+1][1],e=this.diff_commonSuffix(u,r);if(e)var s=r.substring(r.length-e),u=u.substring(0,u.length-e),r=s+r.substring(0,r.length-e),f=s+f;for(var e=u,s=r,h=f,c=o(u,r)+o(r,f);r.charAt(0)===f.charAt(0);){var u=u+r.charAt(0),r=r.substring(1)+f.charAt(0),f=f.substring(1),l=o(u,r)+o(r,f);l>=c&&(c=l,e=u,s=r,h=f)}t[i-1][1]!=e&&(e?t[i-1][1]=e:(t.splice(i-1,1),i--),t[i][1]=s,h?t[i+1][1]=h:(t.splice(i+1,1),i--))}i++}};n.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/;n.whitespaceRegex_=/\s/;n.linebreakRegex_=/[\r\n]/;n.blanklineEndRegex_=/\n\r?\n$/;n.blanklineStartRegex_=/^\r?\n\r?\n/;n.prototype.diff_cleanupEfficiency=function(n){for(var h=!1,e=[],t=0,f=null,i=0,o=!1,s=!1,r=!1,u=!1;i<n.length;)0==n[i][0]?(n[i][1].length<this.Diff_EditCost&&(r||u)?(e[t++]=i,o=r,s=u,f=n[i][1]):(t=0,f=null),r=u=!1):(-1==n[i][0]?u=!0:r=!0,f&&(o&&s&&r&&u||f.length<this.Diff_EditCost/2&&3==o+s+r+u))&&(n.splice(e[t-1],0,[-1,f]),n[e[t-1]+1][0]=1,t--,f=null,o&&s?(r=u=!0,t=0):(t--,i=0<t?e[t-1]:-1,r=u=!1),h=!0),i++;h&&this.diff_cleanupMerge(n)};n.prototype.diff_cleanupMerge=function(n){n.push([0,""]);for(var t=0,i=0,r=0,f="",u="",e;t<n.length;)switch(n[t][0]){case 1:r++;u+=n[t][1];t++;break;case-1:i++;f+=n[t][1];t++;break;case 0:1<i+r?(0!==i&&0!==r&&(e=this.diff_commonPrefix(u,f),0!==e&&(0<t-i-r&&0==n[t-i-r-1][0]?n[t-i-r-1][1]+=u.substring(0,e):(n.splice(0,0,[0,u.substring(0,e)]),t++),u=u.substring(e),f=f.substring(e)),e=this.diff_commonSuffix(u,f),0!==e&&(n[t][1]=u.substring(u.length-e)+n[t][1],u=u.substring(0,u.length-e),f=f.substring(0,f.length-e))),0===i?n.splice(t-r,i+r,[1,u]):0===r?n.splice(t-i,i+r,[-1,f]):n.splice(t-i-r,i+r,[-1,f],[1,u]),t=t-i-r+(i?1:0)+(r?1:0)+1):0!==t&&0==n[t-1][0]?(n[t-1][1]+=n[t][1],n.splice(t,1)):t++;i=r=0;u=f=""}for(""===n[n.length-1][1]&&n.pop(),i=!1,t=1;t<n.length-1;)0==n[t-1][0]&&0==n[t+1][0]&&(n[t][1].substring(n[t][1].length-n[t-1][1].length)==n[t-1][1]?(n[t][1]=n[t-1][1]+n[t][1].substring(0,n[t][1].length-n[t-1][1].length),n[t+1][1]=n[t-1][1]+n[t+1][1],n.splice(t-1,1),i=!0):n[t][1].substring(0,n[t+1][1].length)==n[t+1][1]&&(n[t-1][1]+=n[t+1][1],n[t][1]=n[t][1].substring(n[t+1][1].length)+n[t+1][1],n.splice(t+1,1),i=!0)),t++;i&&this.diff_cleanupMerge(n)};n.prototype.diff_xIndex=function(n,t){for(var r=0,f=0,e=0,u=0,i=0;i<n.length;i++){if(1!==n[i][0]&&(r+=n[i][1].length),-1!==n[i][0]&&(f+=n[i][1].length),r>t)break;e=r;u=f}return n.length!=i&&-1===n[i][0]?u:u+(t-e)};n.prototype.diff_prettyHtml=function(n){for(var i=[],u=/&/g,f=/</g,e=/>/g,o=/\n/g,t=0;t<n.length;t++){var s=n[t][0],r=n[t][1],r=r.replace(u,"&amp;").replace(f,"&lt;").replace(e,"&gt;").replace(o,"&para;<br>");switch(s){case 1:i[t]='<ins style="background:#e6ffe6;">'+r+"<\/ins>";break;case-1:i[t]='<del style="background:#ffe6e6;">'+r+"<\/del>";break;case 0:i[t]="<span>"+r+"<\/span>"}}return i.join("")};n.prototype.diff_text1=function(n){for(var i=[],t=0;t<n.length;t++)1!==n[t][0]&&(i[t]=n[t][1]);return i.join("")};n.prototype.diff_text2=function(n){for(var i=[],t=0;t<n.length;t++)-1!==n[t][0]&&(i[t]=n[t][1]);return i.join("")};n.prototype.diff_levenshtein=function(n){for(var e,u,f=0,t=0,i=0,r=0;r<n.length;r++){e=n[r][0];u=n[r][1];switch(e){case 1:t+=u.length;break;case-1:i+=u.length;break;case 0:f+=Math.max(t,i);i=t=0}}return f+Math.max(t,i)};n.prototype.diff_toDelta=function(n){for(var i=[],t=0;t<n.length;t++)switch(n[t][0]){case 1:i[t]="+"+encodeURI(n[t][1]);break;case-1:i[t]="-"+n[t][1].length;break;case 0:i[t]="="+n[t][1].length}return i.join("\t").replace(/%20/g," ")};n.prototype.diff_fromDelta=function(n,t){for(var i,e,o=[],s=0,f=0,u=t.split(/\t/g),r=0;r<u.length;r++){i=u[r].substring(1);switch(u[r].charAt(0)){case"+":try{o[s++]=[1,decodeURI(i)]}catch(h){throw Error("Illegal escape in diff_fromDelta: "+i);}break;case"-":case"=":if(e=parseInt(i,10),isNaN(e)||0>e)throw Error("Invalid number in diff_fromDelta: "+i);i=n.substring(f,f+=e);o[s++]="="==u[r].charAt(0)?[0,i]:[-1,i];break;default:if(u[r])throw Error("Invalid diff operation in diff_fromDelta: "+u[r]);}}if(f!=n.length)throw Error("Delta length ("+f+") does not equal source text length ("+n.length+").");return o};n.prototype.match_main=function(n,t,i){if(null==n||null==t||null==i)throw Error("Null input. (match_main)");return i=Math.max(0,Math.min(i,n.length)),n==t?0:n.length?n.substring(i,i+t.length)==t?i:this.match_bitap_(n,t,i):-1};n.prototype.match_bitap_=function(n,t,i){function c(n,r){var u=n/t.length,f=Math.abs(i-r);return v.Match_Distance?u+f/v.Match_Distance:f?1:u}var u,h;if(t.length>this.Match_MaxBits)throw Error("Pattern too long for this browser.");var y=this.match_alphabet_(t),v=this,e=this.Match_Threshold,f=n.indexOf(t,i);-1!=f&&(e=Math.min(c(0,f),e),f=n.lastIndexOf(t,i+t.length),-1!=f&&(e=Math.min(c(0,f),e)));for(var p=1<<t.length-1,f=-1,o,r,l=t.length+n.length,a,s=0;s<t.length;s++){for(o=0,r=l;o<r;)c(s,i+r)<=e?o=r:l=r,r=Math.floor((l-o)/2+o);for(l=r,o=Math.max(1,i-r+1),u=Math.min(i+r,n.length)+t.length,r=Array(u+2),r[u+1]=(1<<s)-1;u>=o;u--)if(h=y[n.charAt(u-1)],r[u]=0===s?(r[u+1]<<1|1)&h:(r[u+1]<<1|1)&h|(a[u+1]|a[u])<<1|1|a[u+1],r[u]&p&&(h=c(s,u-1),h<=e))if(e=h,f=u-1,f>i)o=Math.max(1,2*i-f);else break;if(c(s+1,i)>e)break;a=r}return f};n.prototype.match_alphabet_=function(n){for(var i={},t=0;t<n.length;t++)i[n.charAt(t)]=0;for(t=0;t<n.length;t++)i[n.charAt(t)]|=1<<n.length-t-1;return i};n.prototype.patch_addContext_=function(n,t){if(0!=t.length){for(var i=t.substring(n.start2,n.start2+n.length1),r=0;t.indexOf(i)!=t.lastIndexOf(i)&&i.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)r+=this.Patch_Margin,i=t.substring(n.start2-r,n.start2+n.length1+r);r+=this.Patch_Margin;(i=t.substring(n.start2-r,n.start2))&&n.diffs.unshift([0,i]);(r=t.substring(n.start2+n.length1,n.start2+n.length1+r))&&n.diffs.push([0,r]);n.start1-=i.length;n.start2-=i.length;n.length1+=i.length+r.length;n.length2+=i.length+r.length}};n.prototype.patch_make=function(t,i,r){var u,h,f;if("string"==typeof t&&"string"==typeof i&&"undefined"==typeof r)u=t,i=this.diff_main(u,i,!0),2<i.length&&(this.diff_cleanupSemantic(i),this.diff_cleanupEfficiency(i));else if(t&&"object"==typeof t&&"undefined"==typeof i&&"undefined"==typeof r)i=t,u=this.diff_text1(i);else if("string"==typeof t&&i&&"object"==typeof i&&"undefined"==typeof r)u=t;else if("string"==typeof t&&"string"==typeof i&&r&&"object"==typeof r)u=t,i=r;else throw Error("Unknown call format to patch_make.");if(0===i.length)return[];r=[];t=new n.patch_obj;for(var e=0,c=0,s=0,l=u,o=0;o<i.length;o++){h=i[o][0];f=i[o][1];e||0===h||(t.start1=c,t.start2=s);switch(h){case 1:t.diffs[e++]=i[o];t.length2+=f.length;u=u.substring(0,s)+f+u.substring(s);break;case-1:t.length1+=f.length;t.diffs[e++]=i[o];u=u.substring(0,s)+u.substring(s+f.length);break;case 0:f.length<=2*this.Patch_Margin&&e&&i.length!=o+1?(t.diffs[e++]=i[o],t.length1+=f.length,t.length2+=f.length):f.length>=2*this.Patch_Margin&&e&&(this.patch_addContext_(t,l),r.push(t),t=new n.patch_obj,e=0,l=u,c=s)}1!==h&&(c+=f.length);-1!==h&&(s+=f.length)}return e&&(this.patch_addContext_(t,l),r.push(t)),r};n.prototype.patch_deepCopy=function(t){for(var r,i,f,e=[],u=0;u<t.length;u++){for(r=t[u],i=new n.patch_obj,i.diffs=[],f=0;f<r.diffs.length;f++)i.diffs[f]=r.diffs[f].slice();i.start1=r.start1;i.start2=r.start2;i.length1=r.length1;i.length2=r.length2;e[u]=i}return e};n.prototype.patch_apply=function(n,t){var s,i,c,e,o;if(0==n.length)return[t,[]];n=this.patch_deepCopy(n);s=this.patch_addPadding(n);t=s+t+s;this.patch_splitMax(n);for(var l=0,h=[],u=0;u<n.length;u++){var f=n[u].start2+l,i=this.diff_text1(n[u].diffs),r,e=-1;if(i.length>this.Match_MaxBits?(r=this.match_main(t,i.substring(0,this.Match_MaxBits),f),-1!=r&&(e=this.match_main(t,i.substring(i.length-this.Match_MaxBits),f+i.length-this.Match_MaxBits),-1==e||r>=e))&&(r=-1):r=this.match_main(t,i,f),-1==r)h[u]=!1,l-=n[u].length2-n[u].length1;else if(h[u]=!0,l=r-f,f=-1==e?t.substring(r,r+i.length):t.substring(r,e+this.Match_MaxBits),i==f)t=t.substring(0,r)+this.diff_text2(n[u].diffs)+t.substring(r+i.length);else if(f=this.diff_main(i,f,!1),i.length>this.Match_MaxBits&&this.diff_levenshtein(f)/i.length>this.Patch_DeleteThreshold)h[u]=!1;else for(this.diff_cleanupSemanticLossless(f),i=0,e=0;e<n[u].diffs.length;e++)o=n[u].diffs[e],0!==o[0]&&(c=this.diff_xIndex(f,i)),1===o[0]?t=t.substring(0,r+c)+o[1]+t.substring(r+c):-1===o[0]&&(t=t.substring(0,r+c)+t.substring(r+this.diff_xIndex(f,i+o[1].length))),-1!==o[0]&&(i+=o[1].length)}return t=t.substring(s.length,t.length-s.length),[t,h]};n.prototype.patch_addPadding=function(n){for(var i,u,r=this.Patch_Margin,f="",t=1;t<=r;t++)f+=String.fromCharCode(t);for(t=0;t<n.length;t++)n[t].start1+=r,n[t].start2+=r;return t=n[0],i=t.diffs,0==i.length||0!=i[0][0]?(i.unshift([0,f]),t.start1-=r,t.start2-=r,t.length1+=r,t.length2+=r):r>i[0][1].length&&(u=r-i[0][1].length,i[0][1]=f.substring(i[0][1].length)+i[0][1],t.start1-=u,t.start2-=u,t.length1+=u,t.length2+=u),t=n[n.length-1],i=t.diffs,0==i.length||0!=i[i.length-1][0]?(i.push([0,f]),t.length1+=r,t.length2+=r):r>i[i.length-1][1].length&&(u=r-i[i.length-1][1].length,i[i.length-1][1]+=f.substring(0,u),t.length1+=u,t.length2+=u),f};n.prototype.patch_splitMax=function(t){for(var f,i,s,u,r,o=this.Match_MaxBits,e=0;e<t.length;e++)if(!(t[e].length1<=o)){f=t[e];t.splice(e--,1);for(var h=f.start1,c=f.start2,u="";0!==f.diffs.length;){for(i=new n.patch_obj,s=!0,i.start1=h-u.length,i.start2=c-u.length,""!==u&&(i.length1=i.length2=u.length,i.diffs.push([0,u]));0!==f.diffs.length&&i.length1<o-this.Patch_Margin;)u=f.diffs[0][0],r=f.diffs[0][1],1===u?(i.length2+=r.length,c+=r.length,i.diffs.push(f.diffs.shift()),s=!1):-1===u&&1==i.diffs.length&&0==i.diffs[0][0]&&r.length>2*o?(i.length1+=r.length,h+=r.length,s=!1,i.diffs.push([u,r]),f.diffs.shift()):(r=r.substring(0,o-i.length1-this.Patch_Margin),i.length1+=r.length,h+=r.length,0===u?(i.length2+=r.length,c+=r.length):s=!1,i.diffs.push([u,r]),r==f.diffs[0][1]?f.diffs.shift():f.diffs[0][1]=f.diffs[0][1].substring(r.length));u=this.diff_text2(i.diffs);u=u.substring(u.length-this.Patch_Margin);r=this.diff_text1(f.diffs).substring(0,this.Patch_Margin);""!==r&&(i.length1+=r.length,i.length2+=r.length,0!==i.diffs.length&&0===i.diffs[i.diffs.length-1][0]?i.diffs[i.diffs.length-1][1]+=r:i.diffs.push([0,r]));s||t.splice(++e,0,i)}}};n.prototype.patch_toText=function(n){for(var i=[],t=0;t<n.length;t++)i[t]=n[t];return i.join("")};n.prototype.patch_fromText=function(t){var e=[],u,o,i,r,f;if(!t)return e;for(t=t.split("\n"),u=0,o=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;u<t.length;){if(i=t[u].match(o),!i)throw Error("Invalid patch string: "+t[u]);for(r=new n.patch_obj,e.push(r),r.start1=parseInt(i[1],10),""===i[2]?(r.start1--,r.length1=1):"0"==i[2]?r.length1=0:(r.start1--,r.length1=parseInt(i[2],10)),r.start2=parseInt(i[3],10),""===i[4]?(r.start2--,r.length2=1):"0"==i[4]?r.length2=0:(r.start2--,r.length2=parseInt(i[4],10)),u++;u<t.length;){i=t[u].charAt(0);try{f=decodeURI(t[u].substring(1))}catch(s){throw Error("Illegal escape in patch_fromText: "+f);}if("-"==i)r.diffs.push([-1,f]);else if("+"==i)r.diffs.push([1,f]);else if(" "==i)r.diffs.push([0,f]);else if("@"==i)break;else if(""!==i)throw Error('Invalid patch mode "'+i+'" in: '+f);u++}}return e};n.patch_obj=function(){this.diffs=[];this.start2=this.start1=null;this.length2=this.length1=0};n.patch_obj.prototype.toString=function(){var t,n,i;for(t=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,n=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2,t=["@@ -"+t+" +"+n+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case 1:i="+";break;case-1:i="-";break;case 0:i=" "}t[n+1]=i+encodeURI(this.diffs[n][1])+"\n"}return t.join("").replace(/%20/g," ")};this.diff_match_patch=n;this.DIFF_DELETE=-1;this.DIFF_INSERT=1;this.DIFF_EQUAL=0})(),function(){var n;n=jQuery;n.fn.extend({prettyTextDiff:function(t){var r,i;return i={originalContainer:".original",changedContainer:".changed",diffContainer:".diff",cleanup:!0,debug:!1},i=n.extend(i,t),n.fn.prettyTextDiff.debug("Options: ",i,i),r=new diff_match_patch,this.each(function(){var t,e,u,f;return i.originalContent&&i.changedContent?(f=n("<div />").html(i.originalContent).text(),t=n("<div />").html(i.changedContent).text()):(f=n(i.originalContainer,this).text(),t=n(i.changedContainer,this).text()),n.fn.prettyTextDiff.debug("Original text found: ",f,i),n.fn.prettyTextDiff.debug("Changed  text found: ",t,i),u=r.diff_main(f,t),i.cleanup&&r.diff_cleanupSemantic(u),n.fn.prettyTextDiff.debug("Diffs: ",u,i),e=n.map(u,function(t){return n.fn.prettyTextDiff.createHTML(t)}),n(i.diffContainer,this).html(e.join("")),this})}});n.fn.prettyTextDiff.debug=function(n,t,i){if(i.debug)return console.log(n,t)};n.fn.prettyTextDiff.createHTML=function(n){var i,s,r,u,f,e,o,t;s=[];u=/&/g;e=/</g;f=/>/g;o=/\n/g;r=n[0];i=n[1];t=i.replace(u,"&amp;").replace(e,"&lt;").replace(f,"&gt;").replace(o,"<br>");switch(r){case DIFF_INSERT:return"<ins>"+t+"<\/ins>";case DIFF_DELETE:return"<del>"+t+"<\/del>";case DIFF_EQUAL:return"<span>"+t+"<\/span>"}}}.call(this)