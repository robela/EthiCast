(function(){var u={},o=null,c=null,f=null,e=null,t={},n=window.devicePixelRatio||1,r=16*n,l={width:7,height:9,font:10*n+"px arial",colour:"#ffffff",background:"#F03D25",fallback:!0,crossOrigin:!0,abbreviate:!0},i=function(){var n=navigator.userAgent.toLowerCase();return function(t){return n.indexOf(t)!==-1}}(),s={ie:i("msie"),chrome:i("chrome"),webkit:i("chrome")||i("safari"),safari:i("safari")&&!i("chrome"),mozilla:i("mozilla")&&!i("chrome")&&!i("safari")},y=function(){for(var t=document.getElementsByTagName("link"),n=0,i=t.length;n<i;n++)if((t[n].getAttribute("rel")||"").match(/\bicon\b/))return t[n];return!1},p=function(){for(var i,t=document.getElementsByTagName("link"),r=document.getElementsByTagName("head")[0],n=0,u=t.length;n<u;n++)i=typeof t[n]!="undefined",i&&(t[n].getAttribute("rel")||"").match(/\bicon\b/)&&r.removeChild(t[n])},w=function(){if(!c||!o){var n=y();c=o=n?n.getAttribute("href"):"/favicon.ico"}return o},h=function(){return e||(e=document.createElement("canvas"),e.width=r,e.height=r),e},a=function(n){p();var t=document.createElement("link");t.type="image/x-icon";t.rel="icon";t.href=n;document.getElementsByTagName("head")[0].appendChild(t)},tt=function(n){window.console&&window.console.log(n)},b=function(n,i){if(!h().getContext||s.ie||s.safari||t.fallback==="force")return k(n);var u=h().getContext("2d"),i=i||"#000000",e=w();f=document.createElement("img");f.onload=function(){u.clearRect(0,0,r,r);u.drawImage(f,0,0,f.width,f.height,0,0,r,r);(n+"").length>0&&d(u,n,i);v()};!e.match(/^data/)&&t.crossOrigin&&(f.crossOrigin="anonymous");f.src=e},k=function(n){if(t.fallback){var i=document.title;i[0]==="("&&(i=i.slice(i.indexOf(" ")));document.title=(n+"").length>0?"("+n+") "+i:i}},d=function(i,u){typeof u=="number"&&u>99&&t.abbreviate&&(u=g(u));var l=(u+"").length-1,a=t.width*n+6*n*l,v=t.height*n,c=r-v,o=r-a-n,e=16*n,h=16*n,f=2*n;i.font=(s.webkit?"bold ":"")+t.font;i.fillStyle=t.background;i.strokeStyle=t.background;i.lineWidth=n;i.beginPath();i.moveTo(o+f,c);i.quadraticCurveTo(o,c,o,c+f);i.lineTo(o,e-f);i.quadraticCurveTo(o,e,o+f,e);i.lineTo(h-f,e);i.quadraticCurveTo(h,e,h,e-f);i.lineTo(h,c+f);i.quadraticCurveTo(h,c,h-f,c);i.closePath();i.fill();i.beginPath();i.strokeStyle="rgba(0,0,0,0.3)";i.moveTo(o+f/2,e);i.lineTo(h-f/2,e);i.stroke();i.fillStyle=t.colour;i.textAlign="right";i.textBaseline="top";i.fillText(u,n===2?29:15,s.mozilla?7*n:6*n)},v=function(){h().getContext&&a(h().toDataURL())},g=function(n){for(var i=[["G",1e9],["M",1e6],["k",1e3]],t=0;t<i.length;++t)if(n>=i[t][1]){n=nt(n/i[t][1])+i[t][0];break}return n},nt=function(n,t){var i=new Number(n);return i.toFixed(t)};u.setOptions=function(n){t={};for(var i in l)t[i]=n.hasOwnProperty(i)?n[i]:l[i];return this};u.setImage=function(n){return o=n,v(),this};u.setBubble=function(n,t){return n=n||"",b(n,t),this};u.reset=function(){a(c)};u.setOptions(l);window.Tinycon=u;typeof define=="function"&&define.amd&&define(u)})()